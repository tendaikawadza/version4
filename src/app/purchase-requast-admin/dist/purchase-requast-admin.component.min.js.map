{"version":3,"sources":["purchase-requast-admin.component.ts"],"names":["core_1","require","forms_1","angular2_signaturepad_1","PurchaseRequastAdminComponent","productService","messageService","confirmationService","fb","this","signaturePadOptions","minWidth","canvasWidth","canvasHeight","products","productId","productName","productDesc","purposeOfIssue","departCode","requestingReport","itemDescription","datePreviousIssue","previousIssueQty","estimatedValue","empSign","quanity","categoryOpt","name","code","prototype","ngOnInit","_this","purchaseRequastForm","group","Validators","required","getAllProducts","subscribe","data","Object","defineProperty","controls","ngAfterViewInit","signaturePad","set","clear","drawComplete","console","log","toDataURL","drawStart","clearSignature","savePad","base64Data","signatureImg","openNew","product","submitted","productDialog","deleteSelectedProducts","confirm","message","header","icon","accept","add","severity","summary","detail","life","editProduct","patchValue","deleteProduct","filter","val","hideDialog","onSubmit","value","invalid","__spreadArrays","addProduct","push","findIndexById","id","index","i","length","createId","chars","charAt","Math","floor","random","__decorate","ViewChild","SignaturePad","Component","selector","templateUrl","styleUrls","exports"],"mappings":"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","file":"purchase-requast-admin.component.min.js","sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport { Stock } from '../model/stock';\nimport { StockService } from '../service/stock.service';\nimport { SignaturePad } from 'angular2-signaturepad';\n@Component({\n  selector: 'app-purchase-requast-admin',\n  templateUrl: './purchase-requast-admin.component.html',\n  styleUrls: ['./purchase-requast-admin.component.css']\n})\nexport class PurchaseRequastAdminComponent implements OnInit {\n  purchaseRequastForm: FormGroup;\n  signatureImg: string;\n  @ViewChild(SignaturePad) signaturePad: SignaturePad;\n\n  signaturePadOptions: Object = { \n    'minWidth': 2,\n    'canvasWidth': 300,\n    'canvasHeight': 100\n  };\n  productDialog: boolean;\n\n  products = [\n    {\n      productId: 11,\n      productName: 'Computer',\n      productDesc: 'High Config',\n      purposeOfIssue:'damage',\n      departCode: '002',\n      requestingReport: 'Yes',\n      itemDescription: 'Very High',\n      datePreviousIssue: '01/04/2023',\n      previousIssueQty: 5,\n      estimatedValue: 55555533,\n      empSign: 'sign',\n      quanity: 5\n    }\n    ];\n  categoryOpt = [\n    { name: 'accounts', code: 'accounts' },\n    { name: 'admini', code: 'admini' },\n    { name: 'human resourse', code: 'human resourse' },\n\n  ];\n\n  product: any;\n\n  selectedProducts: Stock[];\n\n  submitted: boolean;\n\n  constructor(private productService: StockService, private messageService: MessageService,\n    private confirmationService: ConfirmationService, private fb: FormBuilder) { }\n\n  ngOnInit() {\n    this.purchaseRequastForm = this.fb.group({\n      productId: ['', [Validators.required]],\n      productName: ['', [Validators.required]],\n      productDesc: ['', [Validators.required]],\n      purposeOfIssue: ['', [Validators.required]],\n      departCode: ['', [Validators.required]],\n      requestingReport: ['', [Validators.required]],\n      itemDescription: ['', [Validators.required]],\n      datePreviousIssue: ['', [Validators.required]],\n      previousIssueQty: ['', [Validators.required]],\n      estimatedValue: ['', [Validators.required]],\n      empSign: ['', [Validators.required]],\n      quanity: ['', [Validators.required]]\n    });\n    this.productService.getAllProducts().subscribe(data => this.products = data);\n  }\n  get f(): any {\n    return this.purchaseRequastForm.controls;\n  }\n  ngAfterViewInit() {\n    // this.signaturePad is now available\n    this.signaturePad.set('minWidth', 2); \n    this.signaturePad.clear(); \n  }\n\n  drawComplete() {\n    console.log(this.signaturePad.toDataURL());\n  }\n\n  drawStart() {\n    console.log('begin drawing');\n  }\n\n  clearSignature() {\n    this.signaturePad.clear();\n  }\n\n  savePad() {\n    const base64Data = this.signaturePad.toDataURL();\n    this.signatureImg = base64Data;\n    console.log(this.signatureImg);\n  }\n\n  openNew() {\n    this.product = {};\n    this.submitted = false;\n    this.productDialog = true;\n  }\n\n  deleteSelectedProducts() {\n    this.confirmationService.confirm({\n      message: 'Are you sure you want to delete the selected products?',\n      header: 'Confirm',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        //this.products = this.products.filter(val => !this.selectedProducts.includes('');\n        this.messageService.add({ severity: 'success', summary: 'Successful', detail: 'Products Deleted', life: 3000 });\n      }\n    });\n  }\n\n  editProduct(product: Stock) {\n    this.purchaseRequastForm.patchValue(product);\n    this.productDialog = true;\n  }\n\n  deleteProduct(product: Stock) {\n    this.confirmationService.confirm({\n      message: 'Are you sure you want to delete ' + product.productName + '?',\n      header: 'Confirm',\n      icon: 'pi pi-exclamation-triangle',\n      accept: () => {\n        this.products = this.products.filter(val => val.productId !== product.productId);\n        this.product = {};\n        this.messageService.add({ severity: 'success', summary: 'Successful', detail: 'Product Deleted', life: 3000 });\n      }\n    });\n  }\n\n  hideDialog() {\n    this.productDialog = false;\n    this.submitted = false;\n  }\n\n  onSubmit() {\n    this.submitted = true;   \n    console.log(this.purchaseRequastForm.value)\n   \n    if (this.purchaseRequastForm.invalid) {\n      return\n    }\n    this.products = [this.products, ...this.purchaseRequastForm.value];\n   \n    this.productService.addProduct(this.purchaseRequastForm.value).subscribe((data: any) => {\n      if (data) {\n        this.products.push(this.purchaseRequastForm.value);\n        this.messageService.add({ severity: 'success', summary: 'Product successfully added to the catalog', detail: 'Via MessageService' });\n      }\n      else {\n        this.messageService.add({ severity: 'success', summary: 'Product could not be Added to the catalog : Check Specification of your product', detail: 'Via MessageService' });\n      }\n\n    })\n    // if (this.product.productCode.trim()) {\n    //     if (this.product.productCode) {\n    //         this.products[this.findIndexById(this.product.productCode)] = this.product;\n    //         this.messageService.add({ severity: 'success', summary: 'Successful', detail: 'Product Updated', life: 3000 });\n    //     }\n    //     else {\n    //         this.product.productCode = this.createId();\n\n    //         this.messageService.add({ severity: 'success', summary: 'Successful', detail: 'Product Created', life: 3000 });\n    //     }\n\n    //     this.products = [...this.products];\n    //     this.productDialog = false;\n    //     this.product = {};\n    // }\n  }\n\n  findIndexById(id: number): number {\n    let index = -1;\n    for (let i = 0; i < this.products.length; i++) {\n      if (this.products[i].productId === id) {\n        index = i;\n        break;\n      }\n    }\n\n    return index;\n  }\n\n  createId(): string {\n    let id = '';\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (var i = 0; i < 5; i++) {\n      id += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return id;\n  }\n}\n\n"]}