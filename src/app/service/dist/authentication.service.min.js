"use strict";var __decorate=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(s=(i<3?n(s):3<i?n(t,o,s):n(t,o))||s);return 3<i&&s&&Object.defineProperty(t,o,s),s};exports.__esModule=!0;var core_1=require("@angular/core"),environment_1=require("../../environments/environment"),angular_jwt_1=require("@auth0/angular-jwt"),AuthenticationService=function(){function e(e){this.http=e,this.host=environment_1.environment.apiUrl,this.jwtHelper=new angular_jwt_1.JwtHelperService}return e.prototype.login=function(e){return this.http.post(this.host+"/user/login",e,{observe:"response"})},e.prototype.register=function(e){return this.http.post(this.host+"/user/register",e)},e.prototype.logOut=function(){this.token=null,this.loggedInUsername,localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("users")},e.prototype.saveToken=function(e){this.token=e,localStorage.removeItem("user"),localStorage.setItem("token",e)},e.prototype.addUserToLocalCache=function(e){localStorage.setItem("user",JSON.stringify(e))},e.prototype.getUserFromLocalCache=function(){return JSON.parse(localStorage.getItem("user")||"false")},e.prototype.loadToken=function(){this.token=localStorage.getItem("token")},e.prototype.getToken=function(){return this.token},e.prototype.isUserLoggedIn=function(){if(this.loadToken(),null!=this.token&&""!==this.token){if(null!=this.jwtHelper.decodeToken(this.token).sub&&!this.jwtHelper.isTokenExpired(this.token))return this.loggedInUsername=this.jwtHelper.decodeToken(this.token).sub,!0}else this.logOut();return!1},e=__decorate([core_1.Injectable({providedIn:"root"})],e)}();exports.AuthenticationService=AuthenticationService;
//# sourceMappingURL=authentication.service.min.js.map
