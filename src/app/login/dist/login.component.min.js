"use strict";var __decorate=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(c=(r<3?i(c):3<r?i(t,o,c):i(t,o))||c);return 3<r&&c&&Object.defineProperty(t,o,c),c};exports.__esModule=!0;var core_1=require("@angular/core"),header_type_enum_1=require("../enum/header-type.enum"),notificaton_type_enum_1=require("../enum/notificaton-type.enum"),LoginComponent=function(){function e(e,t,o){this.router=e,this.authenticationService=t,this.notificationService=o,this.subscriptions=[]}return e.prototype.ngOnInit=function(){this.authenticationService.isUserLoggedIn()?this.router.navigateByUrl("Dashboard"):this.router.navigateByUrl("login")},e.prototype.onLogin=function(e){var o=this;this.showLoading=!0,console.log(e),this.subscriptions.push(this.authenticationService.login(e).subscribe({next:function(e){var t=e.headers.get(header_type_enum_1.HeaderType.JWT_TOKEN);o.authenticationService.saveToken(t),o.authenticationService.addUserToLocalCache(e.body),o.router.navigateByUrl("user/management"),o.showLoading=!1},error:function(e){console.log(e),o.sendErrorNotification(notificaton_type_enum_1.NotificationType.ERROR,e.message),o.showLoading=!1}}))},e.prototype.sendErrorNotification=function(e,t){t?this.notificationService.notify(e,t):this.notificationService.notify(e,"An error occured,please try again")},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})},e=__decorate([core_1.Component({selector:"app-login",templateUrl:"./login.component.html",styleUrls:["./login.component.css"]})],e)}();exports.LoginComponent=LoginComponent;
//# sourceMappingURL=login.component.min.js.map
